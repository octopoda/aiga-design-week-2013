/**
* Gumby Fixed
*/!function(){"use strict";function e(e){this.$el=e;this.fixedPoint="";this.pinPoint=!1;this.offset=0;this.pinOffset=0;this.top=0;this.constrainEl=!0;this.state=!1;this.measurements={left:0,width:0};this.setup();var t=this;$(window).on("scroll load",function(){t.monitorScroll()});this.$el.on("gumby.initialize",function(){t.setup()})}e.prototype.setup=function(){var e=this;this.fixedPoint=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["fixed"]));this.pinPoint=Gumby.selectAttr.apply(this.$el,["pin"])||!1;this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0;this.pinOffset=Number(Gumby.selectAttr.apply(this.$el,["pinoffset"]))||0;this.top=Number(Gumby.selectAttr.apply(this.$el,["top"]))||0;this.constrainEl=Gumby.selectAttr.apply(this.$el,["constrain"])||!0;this.constrainEl==="false"&&(this.constrainEl=!1);this.$parent=this.$el.parents(".columns, .column, .row");this.$parent=this.$parent.length?this.$parent.first():!1;this.parentRow=this.$parent?!!this.$parent.hasClass("row"):!1;this.pinPoint&&(this.pinPoint=this.parseAttrValue(this.pinPoint));if(this.$parent&&this.constrainEl){this.measure();$(window).resize(function(){if(e.state){e.measure();e.constrain()}})}};e.prototype.monitorScroll=function(){var e=$(window).scrollTop(),t=this.fixedPoint instanceof jQuery?this.fixedPoint.offset().top:this.fixedPoint,n=!1;this.pinPoint&&(n=this.pinPoint instanceof jQuery?this.pinPoint.offset().top:this.pinPoint);this.offset&&(t-=this.offset);this.pinOffset&&(n-=this.pinOffset);e>=t&&this.state!=="fixed"?(!n||e<n)&&this.fix():e<t&&this.state==="fixed"?this.unfix():n&&e>=n&&this.state!=="pinned"&&this.pin()};e.prototype.fix=function(){this.state="fixed";this.$el.css({top:0+this.top}).addClass("fixed").removeClass("unfixed pinned").trigger("gumby.onFixed");this.$parent&&this.constrain()};e.prototype.unfix=function(){this.state="unfixed";this.$el.addClass("unfixed").removeClass("fixed pinned").trigger("gumby.onUnfixed")};e.prototype.pin=function(){this.state="pinned";this.$el.css({top:this.$el.offset().top}).addClass("pinned fixed").removeClass("unfixed").trigger("gumby.onPinned")};e.prototype.constrain=function(){this.$el.css({left:this.measurements.left,width:this.measurements.width})};e.prototype.measure=function(){var e=this.$parent.offset(),t;this.measurements.left=e.left;this.measurements.width=this.$parent.width();if(this.parentRow){t=Number(this.$parent.css("paddingLeft").replace(/px/,""));t&&(this.measurements.left+=t)}};e.prototype.parseAttrValue=function(e){if($.isNumeric(e))return Number(e);if(e==="top")return this.$el.offset().top;var t=$(e);return t};Gumby.addInitalisation("fixed",function(){$("[data-fixed],[gumby-fixed],[fixed]").each(function(){var t=$(this);if(t.data("isFixed"))return!0;t.data("isFixed",!0);new e(t)})});Gumby.UIModule({module:"fixed",events:["onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}();