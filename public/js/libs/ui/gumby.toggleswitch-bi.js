/**
* Gumby Toggles/Switches
*/!function(){"use strict";function e(e){this.$el=$(e);this.targets=[];this.on="";this.$el.length&&this.init()}function t(e){this.$el=$(e);this.targets=[];this.on="";this.$el.length&&this.init()}e.prototype.init=function(){var e=this;this.setup();this.$el.on(this.on,function(t){t.stopImmediatePropagation();$(this).prop("tagName")==="A"&&t.preventDefault();e.trigger(e.triggered)}).on("gumby.trigger",function(){e.trigger(e.triggered)}).on("gumby.initialize",function(){e.setup()})};e.prototype.setup=function(){this.targets=this.parseTargets();this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click;this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active"};e.prototype.parseTargets=function(){var e=Gumby.selectAttr.apply(this.$el,["trigger"]),t=0,n=[];if(!e)return!1;t=e.indexOf("|");if(t===-1)return[$(e)];n=e.split("|");return n.length>1?[$(n[0]),$(n[1])]:[$(n[0])]};e.prototype.triggered=function(){this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])};t.prototype=new e;e.prototype.trigger=function(e){if(!this.targets)this.$el.toggleClass(this.className);else if(this.targets.length==1)this.$el.add(this.targets[0]).toggleClass(this.className);else if(this.targets.length>1)if(this.targets[0].hasClass(this.className)){this.$el.add(this.targets[0]).removeClass(this.className);this.targets[1].addClass(this.className)}else{this.targets[1].removeClass(this.className);this.$el.add(this.targets[0]).addClass(this.className)}e&&typeof e=="function"&&e.apply(this)};t.prototype.trigger=function(e){if(!this.targets)this.$el.addClass(this.className);else if(this.targets.length==1)this.$el.add(this.targets[0]).addClass(this.className);else if(this.targets.length>1){this.$el.add(this.targets[0]).addClass(this.className);this.targets[1].removeClass(this.className)}e&&typeof e=="function"&&e.apply(this)};Gumby.addInitalisation("toggles",function(t){$(".toggle").each(function(){var n=$(this);if(n.data("isToggle")&&!t)return!0;n.data("isToggle")&&t&&n.trigger("gumby.initialize");n.data("isToggle",!0);new e(n)})});Gumby.addInitalisation("switches",function(e){$(".switch").each(function(){var n=$(this);if(n.data("isSwitch")&&!e)return!0;if(n.data("isSwitch")&&e){n.trigger("gumby.initialize");return!0}n.data("isSwitch",!0);new t(n)})});Gumby.UIModule({module:"toggleswitch",events:["trigger","onTrigger"],init:function(){Gumby.initialize("switches");Gumby.initialize("toggles")}})}();